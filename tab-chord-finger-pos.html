<link rel="import" href="node_modules/@polymer/polymer/polymer-element.html">


<dom-module id="tab-chord-finger-pos">

    <template>

        <style>

            :host {

                --fret-size: 30px;
                --fret-thickness: 1px;

                --cell-size: calc( var(--fret-size) );

                --dot-size: calc( var(--fret-size) * 0.9 );
                --dot-margin: calc( (var(--fret-size) - var(--dot-size)) / 2 );

            }

            .tab-chord-finger-pos {
                position: absolute;
                top: calc( var(--cell-size) * ([[fret]] - 1) );
                left: calc( var(--cell-size) * [[stringIndex]] - var(--cell-size) / 2 + 1px );

                background: #bbffff;

                width: var(--dot-size);
                height: var(--dot-size);
                border-radius: calc( var(--dot-size) / 2 );

                margin-top: var(--dot-margin);

                text-align: center;
            }

        </style>


        <div class="tab-chord-finger-pos">
            <slot></slot>
        </div>

    </template>


    <script>
        // Extend Polymer.Element base class
        // https://github.com/Polymer/polymer#20-es6-class-based-syntax
        class TabChordFingerPosition extends Polymer.Element {
            static get is() { return 'tab-chord-finger-pos'; }

            static get properties() {
                return {
                    string  : {
                        type    : Number,
                        value   : null,
                        notify  : false
                    },
                    fret    : {
                        type    : Number,
                        value   : null,
                        notify  : false
                    }
                };
            };

            static get observers() { return [ /* observer descriptors */ ] }



            constructor() {
                super();

                // The custom elements v1 specification forbids reading attributes, and accessing child or parent
                // information from the DOM API from the constructor. Likewise, attributes and children cannot be added.
                // You need to move any DOM work out the constructor.




                //console.log(this.getAttribute('string'), this.getAttribute('fret'), '?a');

                this.totalStrings = 6;


            }


            ready() {
                super.ready();


                console.log(this.myString, this.myFret, '?');


                if (!this.string || !this.fret) {
                    //this.style.display = 'none';
                }

                // Strings in string property are numerated from 1 to 6 (totalStrings)
                // Finger can only press fret > 0
                if (this.fret < 1 || this.string < 1 || this.string > this.totalStrings) {
                    //this.style.display = 'none';
                }

                this.stringIndex = this.totalStrings - this.string;

            }


            connectedCallback() {
                super.connectedCallback();
                // actions on attached...
            }

        }

        // Register custom element definition using standard platform API
        customElements.define(TabChordFingerPosition.is, TabChordFingerPosition);
    </script>

</dom-module>
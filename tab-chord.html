<link rel="import" href="node_modules/@polymer/polymer/polymer-element.html">
<link rel="import"  href="node_modules/@polymer/polymer/lib/elements/dom-repeat.html">


<dom-module id="tab-chord">

    <template>

        <style>
            :host {

                --fret-size: 30px;
                --fret-thickness: 1px;

                --num-strings: 6;

                --fretboard-width: calc( var(--fret-size) * (var(--num-strings) - 1) + var(--fret-thickness) );


            }

            .tab-chord {
                display: inline-block;
                margin: 10px;
            }

            .fretboard-header {

            }

            .fretboard {
                width: var(--fretboard-width);
                height: var(--fretboard-width);

                background-image:
                    linear-gradient(black var(--fret-thickness), transparent 0),
                    linear-gradient(90deg, black var(--fret-thickness), transparent 0);
                background-size: var(--fret-size);
            }

            h3.name {
                max-width: var(--fretboard-width);

                font-family: Helvetica, sans-serif;
                font-weight: 100;
                text-align: center;
            }
        </style>


        <div class="tab-chord">

            <div class="fretboard-header">

            </div>

            <div class="fretboard">



            </div>

            <h3 class="name">[[name]] <sub>[[value]]</sub></h3>

        </div>

    </template>


    <script>
        // Extend Polymer.Element base class
        // https://github.com/Polymer/polymer#20-es6-class-based-syntax
        class TabChord extends Polymer.Element {
            static get is() { return 'tab-chord'; }

            static get properties() {
                return {
                    name    : {
                        type    : String,
                        value   : null,
                    },
                    value   : {
                        type    : String,
                        value   : null
                    }
                };
            };

            static get observers() { return [ /* observer descriptors */ ] }

            static get chords() {
                return {
                     "Am"   : "x02210",
                     "Dm"   : "xx0231",
                     "Em"   : "022000",
                     "A"    : "x02220",
                     "B"    : "x24442",
                     "C"    : "x32010",
                     "D"    : "xx0232",
                     "E"    : "022100",
                     "F"    : "133211",
                     "G"    : "320003",
                     "F#"   : "244322",
                     "G7"   : "320001"
                }
            } // chords getter

            constructor() {
                super();

                if ( this.hasAttribute('name') ) {
                    this.name = this.getAttribute('name');
                }
                if ( this.hasAttribute('value') ) {
                    this.value = this.getAttribute('value');
                }

                if (null === this.name) {
                    this.name = '×'
                }
                if (null === this.value) {
                    this.value  = TabChord.chords[this.name]
                                ? TabChord.chords[this.name]
                                : '××××××';
                }


            }

            connectedCallback() {
                super.connectedCallback();

                //...
            }

            //...
        }


        // Register custom element definition using standard platform API
        customElements.define(TabChord.is, TabChord);
    </script>

</dom-module>